{"chunk":0,"numChunks":1,"fileHash":"nUxiggbQCcLwa3x1Z309Xzb28PCmSvxBjHk77M6wz8Q=","filePath":"internal/routes/site_routes.go","content":"package routes\n\nimport (\n\t\"github.com/gofiber/fiber/v2\"\n\n\thandlers \"github.com/shurco/litecart/internal/handlers/public\"\n\t\"github.com/shurco/litecart/internal/queries\"\n)\n\n// SiteRoutes is ...\nfunc SiteRoutes(c *fiber.App) {\n\tc.Get(\"/\", func(c *fiber.Ctx) error {\n\t\treturn c.Render(\"index\", nil, \"layouts/main\")\n\t})\n\n\t// catalog section\n\tc.Get(\"/products/:product_slug\", func(c *fiber.Ctx) error {\n\t\tproductSlug := c.Params(\"product_slug\")\n\t\tdb := queries.DB()\n\n\t\tif !db.IsProduct(c.Context(), productSlug) {\n\t\t\treturn c.Status(fiber.StatusNotFound).Render(\"404\", fiber.Map{}, \"layouts/clear\")\n\t\t}\n\n\t\treturn c.Render(\"product\", fiber.Map{\n\t\t\t\"ProductSlug\": productSlug,\n\t\t}, \"layouts/main\")\n\t})\n\n\t// cart section\n\tc.Get(\"/cart\", func(c *fiber.Ctx) error {\n\t\treturn c.Render(\"cart\", nil, \"layouts/main\")\n\t})\n\n\tpayment := c.Group(\"/cart/payment\")\n\tpayment.Post(\"/\", handlers.Payment)\n\tpayment.Post(\"/callback\", handlers.PaymentCallback)\n\tpayment.Get(\"/success\", handlers.PaymentSuccess)\n\tpayment.Get(\"/cancel\", handlers.PaymentCancel)\n}\n"}