{"chunk":0,"numChunks":1,"fileHash":"F6JMyxiwfIzbPSHtwYeN69Szr0+l5hDiXxsXDxHKKi0=","filePath":"internal/handlers/private/install.go","content":"package handlers\n\nimport (\n\t\"github.com/gofiber/fiber/v2\"\n\n\t\"github.com/shurco/litecart/internal/models\"\n\t\"github.com/shurco/litecart/internal/queries\"\n\t\"github.com/shurco/litecart/pkg/logging\"\n\t\"github.com/shurco/litecart/pkg/webutil\"\n)\n\n// Install is ...\n// [post] /api/install\nfunc Install(c *fiber.Ctx) error {\n\tdb := queries.DB()\n\tlog := logging.New()\n\trequest := new(models.Install)\n\n\tif err := c.BodyParser(request); err != nil {\n\t\tlog.ErrorStack(err)\n\t\treturn webutil.StatusBadRequest(c, err.Error())\n\t}\n\n\tif err := request.Validate(); err != nil {\n\t\tlog.ErrorStack(err)\n\t\treturn webutil.StatusBadRequest(c, err.Error())\n\t}\n\n\tif err := db.Install(c.Context(), request); err != nil {\n\t\tlog.ErrorStack(err)\n\t\treturn webutil.StatusInternalServerError(c)\n\t}\n\n\treturn webutil.Response(c, fiber.StatusOK, \"Cart installed\", nil)\n}\n"}