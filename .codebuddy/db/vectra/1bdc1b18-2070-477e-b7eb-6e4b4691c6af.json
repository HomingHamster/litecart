{"chunk":6,"numChunks":11,"fileHash":"5vzQ6EAKKyEj+L6x875XSrWFXsnxCgmamc4hi027MnU=","filePath":"site/public/assets/js/main.js","content":"const { createApp, ref } = Vue\nconst App = {\n  methods: {\n    async settings() {\n      const response = await fetch(`/api/settings`, {\n        credentials: 'include',\n        method: 'GET'\n      })\n      const resp = await response.json()\n      if (resp.success) {\n        var timestamp = new Date(Date.now())\n        timestamp.setTime(timestamp.getTime() + 5 * 60 * 1000)\n        sessionStorage.setItem('timestamp', timestamp.getTime())\n\n        this.currency = resp.result.main.currency\n        sessionStorage.setItem('currency', this.currency)\n\n        this.title = resp.result.main.site_name\n        sessionStorage.setItem('title', this.title)\n\n        this.pages = resp.result.pages\n        sessionStorage.setItem('pages', JSON.stringify(resp.result.pages))\n\n        this.socials = resp.result.socials\n        sessionStorage.setItem('socials', JSON.stringify(resp.result.socials))\n      }\n    },\n    async listPayments() {\n      const response = await fetch(`/api/cart/payment`, {\n        credentials: 'include',\n        method: 'GET'\n      })\n      const resp = await response.json()\n      if (resp.success) {\n        this.payments = resp.result\n      }\n    },\n    // cart functions\n    addCart(id) {\n      let product = {}\n      if (this.products.length > 0) {\n        product = this.products.find((item) => item.id === id)\n      } else {\n        product = this.product\n      }\n\n      if (!this.inCart(product.id)) {\n        product.inCart = true\n        const image = product.images\n          ? {\n            name: product.images[0].name,\n            ext: product.images[0].ext\n          }\n          : null\n\n        window.dispatchEvent(\n          new CustomEvent('addProduct', {\n            detail: {\n              id: product.id,\n              name: product.name,\n              slug: product.slug,\n              amount: product.amount,\n              image: image\n            }\n          })\n       "}