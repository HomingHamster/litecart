{"chunk":1,"numChunks":7,"fileHash":"uGqTN4rV0zsU/GWluD0mH60Iqkfxyh88yA44W8jyI/4=","filePath":"internal/queries/cart.go","content":"package queries\nfunc (q *CartQueries) Carts(ctx context.Context) ([]*models.Cart, error) {\n\tcarts := []*models.Cart{}\n\n\tquery := `\n\tSELECT \n\t\tid, \n\t\temail, \n\t\tamount_total,\n\t\tcurrency,\n\t\tpayment_id,\n\t\tpayment_status,\n\t\tpayment_system,\n\t\tstrftime('%s', created),\n\t\tstrftime('%s', updated)\n\tFROM cart\n`\n\n\trows, err := q.DB.QueryContext(ctx, query)\n\tif err != nil {\n\t\treturn nil, err\n\t}\n\tdefer rows.Close()\n\n\tfor rows.Next() {\n\t\tvar email, paymentID sql.NullString\n\t\tvar updated sql.NullInt64\n\t\tcart := &models.Cart{}\n\n\t\terr := rows.Scan(\n\t\t\t&cart.ID,\n\t\t\t&email,\n\t\t\t&cart.AmountTotal,\n\t\t\t&cart.Currency,\n\t\t\t&paymentID,\n\t\t\t&cart.PaymentStatus,\n\t\t\t&cart.PaymentSystem,\n\t\t\t&cart.Created,\n\t\t\t&updated,\n\t\t)\n\t\tif err != nil {\n\t\t\treturn nil, err\n\t\t}\n\n\t\tcart.Email = email.String\n\t\tcart.PaymentID = paymentID.String\n\t\tif updated.Valid {\n\t\t\tcart.Updated = updated.Int64\n\t\t}\n\n\t\tcarts = append(carts, cart)\n\t}\n\n\tif err := rows.Err(); err != nil {\n\t\treturn nil, err\n\t}\n\n\treturn carts, nil\n}\n// Cart retrieves a cart from the database using the provided cartId."}