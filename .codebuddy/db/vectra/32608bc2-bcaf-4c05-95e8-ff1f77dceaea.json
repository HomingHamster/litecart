{"chunk":2,"numChunks":4,"fileHash":"yRWF4f9/RCA5elPF4InM9cCx4a8cEm6izNdr5E3Vqfg=","filePath":"pkg/litepay/provider_stripe.go","content":"package litepay\nfunc (c *stripe) Pay(cart Cart) (*Payment, error) {\n\tcurrency := strings.ToUpper(cart.Currency)\n\tif !findInSlice(c.currency, strings.ToUpper(currency)) {\n\t\treturn nil, errors.New(\"this currency is not supported\")\n\t}\n\n\tparams := url.Values{}\n\tfor i, s := range cart.Items {\n\t\tiString := strconv.Itoa(i)\n\t\tparams.Add(\"line_items[\"+iString+\"][price_data][unit_amount]\", strconv.Itoa(s.PriceData.UnitAmount))\n\t\tparams.Add(\"line_items[\"+iString+\"][price_data][currency]\", currency)\n\t\tparams.Add(\"line_items[\"+iString+\"][price_data][product_data][name]\", s.PriceData.Product.Name)\n\t\tfor ii, img := range s.PriceData.Product.Images {\n\t\t\tparams.Add(\"line_items[\"+iString+\"][price_data][product_data][images][\"+strconv.Itoa(ii)+\"]\", img)\n\t\t}\n\t\tparams.Add(\"line_items[\"+iString+\"][quantity]\", strconv.Itoa(s.Quantity))\n\t}\n\tparams.Add(\"success_url\", fmt.Sprintf(\"%s/?payment_system=%s&cart_id=%s&session={CHECKOUT_SESSION_ID}\", c.successURL, c.paymentSystem, cart.ID))\n\tparams.Add(\"cancel_url\", fmt.Sprintf(\"%s/?payment_system=%s&cart_id=%s\", c.cancelURL, c.paymentSystem, cart.ID))"}