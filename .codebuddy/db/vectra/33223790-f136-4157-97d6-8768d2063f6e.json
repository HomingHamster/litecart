{"chunk":0,"numChunks":1,"fileHash":"3rsPXRXOEp0Nv8y4KVb+gDY/j+u9tSrWR7hOjTREc28=","filePath":"internal/handlers/public/setting.go","content":"package handlers\n\nimport (\n\t\"github.com/gofiber/fiber/v2\"\n\n\t\"github.com/shurco/litecart/internal/models\"\n\t\"github.com/shurco/litecart/internal/queries\"\n\t\"github.com/shurco/litecart/pkg/logging\"\n\t\"github.com/shurco/litecart/pkg/webutil\"\n)\n\n// Ping is ...\n// [get] /ping\nfunc Ping(c *fiber.Ctx) error {\n\treturn webutil.Response(c, fiber.StatusOK, \"Pong\", nil)\n}\n\n// Settings is ...\n// [get] /api/settings\nfunc Settings(c *fiber.Ctx) error {\n\tdb := queries.DB()\n\tlog := logging.New()\n\n\tsettingMain, err := queries.GetSettingByGroup[models.Main](c.Context(), db)\n\tif err != nil {\n\t\tlog.ErrorStack(err)\n\t\treturn webutil.StatusInternalServerError(c)\n\t}\n\n\tsettingSocial, err := queries.GetSettingByGroup[models.Social](c.Context(), db)\n\tif err != nil {\n\t\tlog.ErrorStack(err)\n\t\treturn webutil.StatusInternalServerError(c)\n\t}\n\n\tsettingPayment, err := queries.GetSettingByGroup[models.Payment](c.Context(), db)\n\tif err != nil {\n\t\tlog.ErrorStack(err)\n\t\treturn webutil.StatusInternalServerError(c)\n\t}\n\n\tpages, err := db.ListPages(c.Context(), false)\n\tif err != nil {\n\t\tlog.ErrorStack(err)\n\t\treturn webutil.StatusInternalServerError(c)\n\t}\n\n\treturn webutil.Response(c, fiber.StatusOK, \"Settings\", map[string]any{\n\t\t\"main\": map[string]string{\n\t\t\t\"site_name\": settingMain.SiteName,\n\t\t\t\"domain\":    settingMain.Domain,\n\t\t\t\"currency\":  settingPayment.Currency,\n\t\t},\n\t\t\"socials\": settingSocial,\n\t\t\"pages\":   pages,\n\t})\n}\n"}