{"chunk":0,"numChunks":1,"fileHash":"NPn/n8MhGlpZywAqmybv5SS9k3hQ+qVphnH8dkKltok=","filePath":"internal/handlers/public/product.go","content":"package handlers\n\nimport (\n\t\"github.com/gofiber/fiber/v2\"\n\n\t\"github.com/shurco/litecart/internal/queries\"\n\t\"github.com/shurco/litecart/pkg/logging\"\n\t\"github.com/shurco/litecart/pkg/webutil\"\n)\n\n// Products is ...\n// [get] /api/products\nfunc Products(c *fiber.Ctx) error {\n\tdb := queries.DB()\n\tlog := logging.New()\n\n\tproducts, err := db.ListProducts(c.Context(), false)\n\tif err != nil {\n\t\tlog.ErrorStack(err)\n\t\treturn webutil.StatusInternalServerError(c)\n\t}\n\n\treturn webutil.Response(c, fiber.StatusOK, \"Products\", products)\n}\n\n// GetProduct is ...\n// [get] /api/products/:product_id\nfunc Product(c *fiber.Ctx) error {\n\tproductID := c.Params(\"product_id\")\n\tdb := queries.DB()\n\tlog := logging.New()\n\n\tproduct, err := db.Product(c.Context(), false, productID)\n\tif err != nil {\n\t\tlog.ErrorStack(err)\n\t\treturn webutil.StatusInternalServerError(c)\n\t}\n\n\treturn webutil.Response(c, fiber.StatusOK, \"Product info\", product)\n}\n"}