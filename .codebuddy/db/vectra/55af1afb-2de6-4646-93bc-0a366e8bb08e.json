{"chunk":1,"numChunks":2,"fileHash":"PwrVbyq8NHTBEBaIdhcpCo7WmN7senl7ROjt+thQFrE=","filePath":"web/admin/src/components/page/Add.vue","content":"import { apiPost } from \"@/utils/api\";\nimport { Form } from \"vee-validate\";\n\nconst positionPage = [\"header\", \"footer\"];\nconst props = defineProps({\n  page: {\n    required: true,\n  },\n  pages: {\n    required: true,\n  },\n  updateActive: Function,\n  close: Function,\n});\n\nconst emits = defineEmits([\"update:modelValue\"]);\nconst page = computed({\n  get: () => {\n    return props.page;\n  },\n  set: (val) => {\n    emits(\"update:modelValue\", val);\n  },\n});\n\nconst pages = computed({\n  get: () => {\n    return props.pages;\n  },\n  set: (val) => {\n    emits(\"update:modelValue\", val);\n  },\n});\n\nconst addPage = async () => {\n  const add = { ...page.value };\n  apiPost(`/api/_/pages`, add).then(res => {\n    if (!Array.isArray(pages.value)) {\n      pages.value = [];\n    }\n\n    if (res.success) {\n      pages.value.push({\n        id: res.result.id,\n        name: res.result.name,\n        slug: res.result.slug,\n        position: res.result.position,\n        created: res.result.created,\n        active: res.result.active,\n      });\n      props.close();\n    } else {\n      showMessage(res.result, \"connextError\");\n    }\n  });\n};\n</script>\n"}