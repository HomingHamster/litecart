{"chunk":13,"numChunks":15,"fileHash":"8k4FlTUnMf07dAju0be0NC0/K8xARV1JpkKBM3DCrfY=","filePath":"internal/handlers/public/cart.go","content":"package handlers\nfunc PaymentSuccess(c *fiber.Ctx) error {\n\tswitch payment.PaymentSystem {\n\tcase litepay.STRIPE:\n\t\tsessionStripe := c.Query(\"session\")\n\t\tsetting, err := queries.GetSettingByGroup[models.Stripe](c.Context(), db)\n\t\tif err != nil {\n\t\t\tlog.ErrorStack(err)\n\t\t\treturn webutil.StatusInternalServerError(c)\n\t\t}\n\n\t\tif !setting.Active {\n\t\t\treturn webutil.StatusNotFound(c)\n\t\t}\n\t\tresponse, err := litepay.New(\"\", \"\", \"\").Stripe(setting.SecretKey).Checkout(payment, sessionStripe)\n\t\tif err != nil {\n\t\t\tlog.ErrorStack(err)\n\t\t\treturn webutil.StatusInternalServerError(c)\n\t\t}\n\t\tpayment.MerchantID = response.MerchantID\n\t\tpayment.Status = response.Status\n\n\tcase litepay.PAYPAL:\n\t\ttokenPaypal := c.Query(\"token\")\n\t\tsetting, err := queries.GetSettingByGroup[models.Paypal](c.Context(), db)\n\t\tif err != nil {\n\t\t\tlog.ErrorStack(err)\n\t\t\treturn webutil.StatusInternalServerError(c)\n\t\t}\n\n\t\tif !setting.Active {\n\t\t\treturn webutil.StatusNotFound(c)\n\t\t}\n\t\tresponse, err := litepay.New(\"\", \"\", \"\").Paypal(setting.ClientID, setting.SecretKey).Checkout(payment, tokenPaypal)\n\t\tif err != nil {\n\t\t\tlog.ErrorStack(err)\n\t\t\treturn webutil.StatusInternalServerError(c)\n\t\t}\n\t\tpayment.MerchantID = response.MerchantID\n\t\tpayment.Status = response.Status\n\n\tcase litepay.SPECTROCOIN:\n\t\tfmt.Print(payment)\n\t}\n\n\terr = db.UpdateCart(c.Context(), &models.Cart{\n\t\tCore: models.Core{\n\t\t\tID: payment.CartID,\n\t\t},\n\t\tPaymentID:     payment.MerchantID,\n\t\tPaymentStatus: payment.Status,\n\t\tPaymentSystem: payment.PaymentSystem,\n\t})\n\tif err != nil {"}