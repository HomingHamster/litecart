{"chunk":0,"numChunks":7,"fileHash":"29E9xFGFjc3raKkkjn6QgVwydbVzR/jGl9rax+tvZec=","filePath":"internal/handlers/private/product.go","content":"package handlers\nimport (\n\t\"fmt\"\n\n\t\"github.com/disintegration/imaging\"\n\t\"github.com/gofiber/fiber/v2\"\n\t\"github.com/google/uuid\"\n\n\t\"github.com/shurco/litecart/internal/models\"\n\t\"github.com/shurco/litecart/internal/queries\"\n\t\"github.com/shurco/litecart/pkg/errors\"\n\t\"github.com/shurco/litecart/pkg/fsutil\"\n\t\"github.com/shurco/litecart/pkg/logging\"\n\t\"github.com/shurco/litecart/pkg/webutil\"\n)\n// Products is ...\n// [get] /api/_/products\nfunc Products(c *fiber.Ctx) error {\n\tdb := queries.DB()\n\tlog := logging.New()\n\n\tproducts, err := db.ListProducts(c.Context(), true)\n\tif err != nil {\n\t\tlog.ErrorStack(err)\n\t\treturn webutil.StatusInternalServerError(c)\n\t}\n\n\treturn webutil.Response(c, fiber.StatusOK, \"Products\", products)\n}\n// AddProduct is ...\n// [post] /api/_/products\nfunc AddProduct(c *fiber.Ctx) error {\n\tdb := queries.DB()\n\tlog := logging.New()\n\trequest := &models.Product{}\n\n\tif err := c.BodyParser(request); err != nil {\n\t\tlog.ErrorStack(err)\n\t\treturn webutil.StatusBadRequest(c, err.Error())\n\t}\n\n\tproduct, err := db.AddProduct(c.Context(), request)\n\tif err != nil {\n\t\tlog.ErrorStack(err)\n\t\treturn webutil.StatusInternalServerError(c)\n\t}\n\n\treturn webutil.Response(c, fiber.StatusOK, \"Product added\", product)\n}\n// GetProduct is ...\n// [get] /api/_/products/:product_id"}