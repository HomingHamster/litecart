{"chunk":3,"numChunks":15,"fileHash":"8k4FlTUnMf07dAju0be0NC0/K8xARV1JpkKBM3DCrfY=","filePath":"internal/handlers/public/cart.go","content":"package handlers\nfunc Payment(c *fiber.Ctx) error {\n\tfor i, product := range products.Products {\n\t\timages := []string{}\n\t\tfor _, image := range product.Images {\n\t\t\tpath := fmt.Sprintf(\"https://%s/uploads/%s_md.%s\", domain, image.Name, image.Ext)\n\t\t\timages = append(images, path)\n\t\t}\n\n\t\tquantity := 1\n\t\tfor _, cartProduct := range payment.Products {\n\t\t\tif cartProduct.ProductID == product.ID {\n\t\t\t\tquantity = cartProduct.Quantity\n\t\t\t}\n\t\t}\n\n\t\titems[i] = litepay.Item{\n\t\t\tPriceData: litepay.Price{\n\t\t\t\tUnitAmount: product.Amount,\n\t\t\t\tProduct: litepay.Product{\n\t\t\t\t\tName:   product.Name,\n\t\t\t\t\tImages: images,\n\t\t\t\t},\n\t\t\t},\n\t\t\tQuantity: quantity,\n\t\t}\n\n\t\tif product.Description != \"\" {\n\t\t\titems[i].PriceData.Product.Description = product.Description\n\t\t}\n\t}\n\n\tcart := litepay.Cart{\n\t\tID:       security.RandomString(),\n\t\tCurrency: currency,\n\t\tItems:    items,\n\t}\n\n\tcallbackURL := fmt.Sprintf(\"https://%s/cart/payment/callback\", domain)\n\tsuccessURL := fmt.Sprintf(\"https://%s/cart/payment/success\", domain)\n\tcancelURL := fmt.Sprintf(\"https://%s/cart/payment/cancel\", domain)\n\tpay := litepay.New(callbackURL, successURL, cancelURL)"}