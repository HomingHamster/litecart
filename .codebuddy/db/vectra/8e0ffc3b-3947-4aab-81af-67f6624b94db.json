{"chunk":12,"numChunks":15,"fileHash":"8k4FlTUnMf07dAju0be0NC0/K8xARV1JpkKBM3DCrfY=","filePath":"internal/handlers/public/cart.go","content":"package handlers\nfunc PaymentSuccess(c *fiber.Ctx) error {\n\tlog := logging.New()\n\tif c.Query(\"cart_id\") == \"\" {\n\t\treturn webutil.StatusBadRequest(c, nil)\n\t}\n\n\tpayment := &litepay.Payment{\n\t\tCartID:        c.Query(\"cart_id\"),\n\t\tPaymentSystem: litepay.PaymentSystem(c.Query(\"payment_system\")),\n\t}\n\n\tif err := payment.Validate(); err != nil {\n\t\treturn c.Redirect(\"/\")\n\t}\n\n\tdb := queries.DB()\n\tcartInfo, err := db.Cart(c.Context(), c.Query(\"cart_id\"))\n\tif err != nil {\n\t\tlog.ErrorStack(err)\n\t\treturn webutil.StatusInternalServerError(c)\n\t}\n\n\tif cartInfo.PaymentStatus == \"paid\" {\n\t\treturn c.Render(\"success\", nil, \"layouts/main\")\n\t}\n\n\tswitch payment.PaymentSystem {"}