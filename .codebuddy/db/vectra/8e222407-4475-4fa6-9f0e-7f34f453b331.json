{"chunk":8,"numChunks":11,"fileHash":"5vzQ6EAKKyEj+L6x875XSrWFXsnxCgmamc4hi027MnU=","filePath":"web/site/public/assets/js/main.js","content":"const { createApp, ref } = Vue\nconst App = {\n  methods: {\n    removeCart(id) {\n      const index = this.cart.findIndex((item) => item.id === id)\n      if (index !== -1) {\n        this.cart.splice(index, 1)\n        localStorage.setItem('cart', JSON.stringify(this.cart))\n        window.dispatchEvent(new CustomEvent('delProduct'))\n\n        if (this.product) {\n          this.product.inCart = false\n        }\n\n        if (this.products.length > 0) {\n          console.log(this.products)\n          this.products.find((item) => item.id === id).inCart = false\n        }\n      }\n    },\n    inCart(id) {\n      if (localStorage.getItem('cart')) {\n        const cart = JSON.parse(localStorage.getItem('cart'))\n        let obj = cart.find((o) => o.id === id)\n        if (obj) {\n          return true\n        }\n        return false\n      }\n    },\n    totalCartAmount() {\n      let total = 0\n      for (const item of this.cart) {\n        total = total + item.amount\n      }\n      return this.costFormat(total)\n    },\n    async checkOut() {\n      localStorage.setItem('email', this.email)\n      localStorage.setItem('provider', this.provider)\n\n      this.showOverlay()\n\n      var cart = {\n        email: this.email,\n        provider: this.provider,\n        products: this.cart.map((item) => ({ id: item.id, quantity: 1 }))\n      }\n\n      const response = await fetch(`/cart/payment`, {\n        credentials: 'include',\n        method: 'POST',\n        body: JSON.stringify(cart),\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      })\n      const resp = await response.json()\n      if (resp.success) {\n        window.location.href = resp.result\n      } \n      \n      this.error = resp.message;\n    },"}