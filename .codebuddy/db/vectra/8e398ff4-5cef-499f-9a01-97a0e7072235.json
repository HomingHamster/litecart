{"chunk":6,"numChunks":7,"fileHash":"29E9xFGFjc3raKkkjn6QgVwydbVzR/jGl9rax+tvZec=","filePath":"internal/handlers/private/product.go","content":"package handlers\nfunc ProductDigital(c *fiber.Ctx) error {\n\tproductID := c.Params(\"product_id\")\n\tdb := queries.DB()\n\tlog := logging.New()\n\n\tdigital, err := db.ProductDigital(c.Context(), productID)\n\tif err != nil {\n\t\tif err == errors.ErrProductNotFound {\n\t\t\treturn webutil.StatusNotFound(c)\n\t\t}\n\t\tlog.ErrorStack(err)\n\t\treturn webutil.StatusInternalServerError(c)\n\t}\n\n\treturn webutil.Response(c, fiber.StatusOK, \"Product digital\", digital)\n}\n// AddProductDigital is ...\n// [post] /api/_/products/:product_id/digital\nfunc AddProductDigital(c *fiber.Ctx) error {\n\tproductID := c.Params(\"product_id\")\n\tdb := queries.DB()\n\tlog := logging.New()\n\n\tfileTmp, _ := c.FormFile(\"document\")\n\tif fileTmp != nil {\n\t\tfileUUID := uuid.New().String()\n\t\tfileExt := fsutil.ExtName(fileTmp.Filename)\n\t\tfileName := fmt.Sprintf(\"%s.%s\", fileUUID, fileExt)\n\t\tfilePath := fmt.Sprintf(\"./lc_digitals/%s\", fileName)\n\t\tfileOrigName := fileTmp.Filename\n\n\t\tc.SaveFile(fileTmp, filePath)\n\n\t\tfile, err := db.AddDigitalFile(c.Context(), productID, fileUUID, fileExt, fileOrigName)\n\t\tif err != nil {\n\t\t\tlog.ErrorStack(err)\n\t\t\treturn webutil.StatusInternalServerError(c)\n\t\t}\n\n\t\treturn webutil.Response(c, fiber.StatusOK, \"Digital added\", file)\n\t}\n\n\tdata, err := db.AddDigitalData(c.Context(), productID, \"\")\n\tif err != nil {\n\t\tlog.ErrorStack(err)\n\t\treturn webutil.StatusInternalServerError(c)\n\t}\n\n\treturn webutil.Response(c, fiber.StatusOK, \"Digital added\", data)\n}\n// UpdateProductDigital is ...\n// [patch] /api/_/products/:product_id/digital/:digital_id"}