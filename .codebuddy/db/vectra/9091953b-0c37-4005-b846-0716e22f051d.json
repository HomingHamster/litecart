{"chunk":0,"numChunks":1,"fileHash":"8XMGRFPw6OZqN3gepO8KIYfCmZW4HQp6xajpdlB7rJs=","filePath":"internal/handlers/private/cart.go","content":"package handlers\n\nimport (\n\t\"github.com/gofiber/fiber/v2\"\n\t\"github.com/shurco/litecart/internal/mailer\"\n\t\"github.com/shurco/litecart/internal/queries\"\n\t\"github.com/shurco/litecart/pkg/logging\"\n\t\"github.com/shurco/litecart/pkg/webutil\"\n)\n\n// Carts is ...\n// [get] /api/_/carts\nfunc Carts(c *fiber.Ctx) error {\n\tdb := queries.DB()\n\tlog := logging.New()\n\n\tproducts, err := db.Carts(c.Context())\n\tif err != nil {\n\t\tlog.ErrorStack(err)\n\t\treturn webutil.StatusInternalServerError(c)\n\t}\n\n\treturn webutil.Response(c, fiber.StatusOK, \"Carts\", products)\n}\n\n// CartSendMail\n// [post] /api/_/carts/:cart_id/mail\nfunc CartSendMail(c *fiber.Ctx) error {\n\tcartID := c.Params(\"cart_id\")\n\tlog := logging.New()\n\n\tif err := mailer.SendCartLetter(cartID); err != nil {\n\t\tlog.ErrorStack(err)\n\t\treturn webutil.StatusInternalServerError(c)\n\t}\n\n\treturn webutil.Response(c, fiber.StatusOK, \"Mail sended\", nil)\n}\n"}