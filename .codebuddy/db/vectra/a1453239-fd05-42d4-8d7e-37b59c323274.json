{"chunk":2,"numChunks":4,"fileHash":"YBobxGdUGnEMNSLSL5QwMbgVpkitnt8augBA/LDY5ZE=","filePath":"web/admin/src/components/product/Digital.vue","content":"const digital = ref({});\nconst props = defineProps({\n  drawer: {\n    required: true,\n  },\n  products: {\n    required: true,\n  },\n  close: Function,\n});\n\nconst emits = defineEmits([\"update:modelValue\"]);\nconst products = computed({\n  get: () => {\n    return props.products;\n  },\n  set: (val) => {\n    emits(\"update:modelValue\", val);\n  },\n});\n\nonMounted(() => {\n  apiGet(`/api/_/products/${props.drawer.product.id}/digital`).then(res => {\n    if (res.success && res.result !== null) {\n      digital.value.type = res.result.type;\n      digital.value.files = res.result.files ?? [];\n      digital.value.data = res.result.data ?? [];\n    }\n  });\n});\n\nconst addDigitalFile = (e) => {\n  if (e.success) {\n    const productToUpdate = products.value.products.find((e) => e.id === props.drawer.product.id)\n    if (!productToUpdate.digital.filled) {\n      productToUpdate.digital.filled = true;\n    }\n    digital.value.files.push(e.result);\n  }\n};\n\nconst addDigitalData = async () => {\n  apiPost(`/api/_/products/${props.drawer.product.id}/digital`).then(res => {\n    if (res.success) {\n      const productToUpdate = products.value.products.find((e) => e.id === props.drawer.product.id)\n      if (!productToUpdate.digital.filled) {\n        productToUpdate.digital.filled = true;\n      }\n      digital.value.data.push(res.result);\n    } else {\n      showMessage(res.result, \"connextError\");\n    }\n  });\n};\n\nconst saveData = async (index) => {\n  const update = {\n    content: digital.value.data[index].content,\n  };\n  apiUpdate(`/api/_/products/${props.drawer.product.id}/digital/${digital.value.data[index].id}`, update)\n};\n\nconst deleteDigital = async (type, index) => {\n"}