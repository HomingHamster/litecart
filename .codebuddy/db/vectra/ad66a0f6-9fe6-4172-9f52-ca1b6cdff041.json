{"chunk":0,"numChunks":2,"fileHash":"0pK8YaMIw+q7Qo52YygnlSrrPIH4JW9XOt0I51msMAc=","filePath":"k8s/litecart.yaml","content":"apiVersion: v1\nkind: PersistentVolumeClaim\nmetadata:\n  name: litecart-pvc\n  namespace: shop\nspec:\n  accessModes:\n    - ReadWriteMany\n  resources:\n    requests:\n      storage: 2Gi\n  storageClassName: longhorn-sg\n\n---\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: litecart\n  namespace: shop\nspec:\n  replicas: 1\n  selector:\n    matchLabels:\n      app: litecart\n  template:\n    metadata:\n      labels:\n        app: litecart\n    spec:\n      nodeSelector:\n        type: sg\n      containers:\n      - name: litecart\n        image: shurco/litecart:latest\n        ports:\n        - containerPort: 8080\n        volumeMounts:\n        - name: litecart-storage\n          mountPath: /lc_base\n          subPath: lc_base \n        - name: litecart-storage\n          mountPath: /lc_digitals\n          subPath: lc_digitals\n        - name: litecart-storage\n          mountPath: /lc_uploads\n          subPath: lc_uploads\n        - name: litecart-storage\n          mountPath: /site\n          subPath: site\n      volumes:\n      - name: litecart-storage\n        persistentVolumeClaim:\n          claimName: litecart-pvc\n\n---\napiVersion: networking.k8s.io/v1\nkind: Ingress\nmetadata:\n  name: litecart-ingress\n  namespace: shop\n  annotations:\n    cert-manager.io/cluster-issuer: \"letsencrypt-prod\"\n    nginx.ingress.kubernetes.io/ssl-redirect: \"true\"\nspec:\n  ingressClassName: nginx\n  tls:\n  - hosts:\n    - domain\n    secretName: litecart-tls\n  rules:\n  - host: domain\n    http:\n      paths:\n      - path: /\n        pathType: Prefix\n        backend:\n          service:\n            name: litecart-service\n            port:\n              number: 8080\n\n---\napiVersion: v1\n"}