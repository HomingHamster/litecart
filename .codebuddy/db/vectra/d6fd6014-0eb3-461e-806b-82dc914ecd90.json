{"chunk":0,"numChunks":1,"fileHash":"QgUXmEO6YxbA0k4I5kXe7f9/8mteh1pvMZnXQPCpDyI=","filePath":"web/admin/src/pages/settings/main.vue","content":"<template>\n  <div class=\"pb-10\">\n    <header class=\"mb-4\">\n      <h1>Main</h1>\n    </header>\n\n    <Form @submit=\"updateSetting\" v-slot=\"{ errors }\">\n      <FormInput v-model.trim=\"main.site_name\" :error=\"errors.site_name\" rules=\"required|min:6\" class=\"max-w-md\" id=\"site_name\" type=\"text\" title=\"Site name\" ico=\"glob-alt\" />\n      <FormInput v-model.trim=\"main.domain\" :error=\"errors.domain\" rules=\"required|min:4\" class=\"max-w-md mt-5\" id=\"domain\" type=\"text\" title=\"Domain\" ico=\"glob-alt\" />\n      <div class=\"pt-5\">\n        <FormButton type=\"submit\" name=\"Save\" color=\"green\" />\n      </div>\n    </Form>\n  </div>\n</template>\n\n<script setup>\nimport { onMounted, ref } from \"vue\";\nimport { FormInput, FormButton, FormSelect } from \"@/components/\";\nimport { showMessage } from \"@/utils/message\";\nimport { apiGet, apiUpdate } from \"@/utils/api\";\nimport { Form } from \"vee-validate\";\n\nconst main = ref({});\n\nonMounted(() => {\n  apiGet(`/api/_/settings/main`).then(res => {\n    if (res.success) {\n      main.value = res.result;\n    }\n  });\n});\n\nconst updateSetting = async () => {\n  await apiUpdate(`/api/_/settings/main`, main.value).then(res => {\n    if (res.success) {\n      showMessage(res.message);\n    } else {\n      showMessage(res.result, \"connextError\");\n    }\n  });\n};\n</script>\n"}