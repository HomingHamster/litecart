{"chunk":0,"numChunks":2,"fileHash":"TaS4SJzGeNfW+MlHLRCSGSBaG0YwL8ZUcnkeBo/oBU0=","filePath":"web/admin/src/components/form/Upload.vue","content":"<template>\n  <div class=\"upload bg-gray-200\" @dragover=\"dragover\" @dragleave=\"dragleave\" @drop=\"drop\">\n    <input type=\"file\" multiple name=\"fields[assetsFieldHandle][]\" id=\"assetsFieldHandle\" @change=\"onChange\" ref=\"file\" :accept=\"accept\" />\n    <label for=\"assetsFieldHandle\">\n      <SvgIcon name=\"plus\" class=\"h-5 w-5\" stroke=\"currentColor\" />\n    </label>\n  </div>\n</template>\n\n<script setup>\nimport { getCurrentInstance } from \"vue\";\nimport { apiPost } from \"@/utils/api\";\n\nconst props = defineProps({\n  section: {\n    type: String,\n    required: true,\n  },\n  accept: {\n    type: String,\n  },\n  productId: String,\n  status: Boolean,\n});\n\nconst instance = getCurrentInstance();\nconst emits = defineEmits([\"added\"]);\n\nconst onChange = () => {\n  [...instance.refs.file.files].forEach((f) => {\n    const formData = new FormData();\n    formData.append(\"document\", f);\n    apiPost(`/api/_/products/${props.productId}/${props.section}`, formData).then(res => {\n      emits(\"added\", res);\n    })\n  });\n};\n\nconst dragover = (event) => {\n  event.preventDefault();\n  if (!event.currentTarget.classList.contains(\"bg-green-300\")) {\n    event.currentTarget.classList.remove(\"bg-gray-100\");\n    event.currentTarget.classList.add(\"bg-green-300\");\n  }\n};\n\nconst dragleave = (event) => {\n  event.currentTarget.classList.add(\"bg-gray-100\");\n  event.currentTarget.classList.remove(\"bg-green-300\");\n};\n\nconst drop = (event) => {\n  event.preventDefault();\n  instance.refs.file.files = event.dataTransfer.files;\n  onChange();\n  event.currentTarget.classList.add(\"bg-gray-100\");\n  event.currentTarget.classList.remove(\"bg-green-300\");\n};\n</script>\n\n"}