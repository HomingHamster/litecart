{"chunk":0,"numChunks":1,"fileHash":"9UDC/T7k4M4ex5QES+wsdkUPeJlBIR7kHfohY6XN9bA=","filePath":"scripts/golang","content":"#!/usr/bin/env bash\n\n#set -e\n\nROOT_PATH=\"$(git rev-parse --show-toplevel)\"\nsource ${ROOT_PATH}/scripts/_helper\n\nprint_header \"Install/Update Golang\"\n\nget_latest_go_version() {\n  wget -qO- \"https://golang.org/dl/\" | grep -v -E 'go[0-9\\.]+(beta|rc)' | grep -E -o 'go[0-9\\.]+' | grep -E -o '[0-9]\\.[0-9]+(\\.[0-9]+)?' | sort -V | uniq | tail -1\n}\n\ncase \"$OS\" in\nDarwin*)\n  brew install go\n  ;;\nLinux*)\n  support_arch\n  GO_RELEASE=$(get_latest_go_version)\n  GO_PATH=\"$HOME/go\"\n\n  #rm -rf $GO_PATH\n  #mkdir -p $GO_PATH\n\n  if ! grep -q \"export GOROOT=\\\"\\$HOME/go\\\"\" ~/.bashrc; then\n    echo -e \"export GOROOT=\\\"\\$HOME/go\\\"\" >>~/.bashrc\n  fi\n\n  if ! grep -q \"export GOPATH=\\\"\\$HOME/go/packages\\\"\" ~/.bashrc; then\n    echo -e \"export GOPATH=\\\"\\$HOME/go/packages\\\"\" >>~/.bashrc\n  fi\n\n  if ! grep -q \"export PATH=\\$PATH:\\$GOROOT/bin:\\$GOPATH/bin\" ~/.bashrc; then\n    echo -e \"export PATH=\\$PATH:\\$GOROOT/bin:\\$GOPATH/bin\" >>~/.bashrc\n  fi\n\n  source ~/.bashrc\n\n  curl --silent https://dl.google.com/go/go${GO_RELEASE}.linux-amd64.tar.gz | tar -vxz --strip-components 1 -C ${GO_PATH} >/dev/null 2>&1\n  ;;\n*)\n  print_answer \"ERROR\" red\n  echo \"Unsupported OS: $OS\"\n  exit\n  ;;\nesac\n\nprint_answer \"SUCCESS\" green\n"}